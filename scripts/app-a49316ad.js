"use strict";angular.module("ccapp",["ngAnimate","ngSanitize","restangular","ui.router"]).constant("COUNTRY_CAPITAL_PREFIX","http://api.geonames.org/").constant("COUNTRY_CAPITAL_CODES","countryInfoJSON?").constant("COUNTRY_CAPITAL_SUFFIX","username=jmorenor").constant("COUNTRY_CAPITAL_JSON","JSON?").config(["$stateProvider","$urlRouterProvider",function(t,o){t.state("home",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl"}).state("country-list",{url:"/countries",templateUrl:"app/countries_list/countries_list.html",controller:"CountryListCtrl"}).state("country-detail",{url:"/countries/:country",templateUrl:"app/country_detail/country_detail.html",controller:"CountryDetailCtrl",resolve:{country:["countryInfo","$location","$filter","$stateParams",function(t,o,n,r){return t.getInformation().then(function(t){var o=n("filter")(t,{countryCode:r.country});return o.length||location.path("/countries"),o[0]})}]}}),o.otherwise("/")}]).factory("countryInfoRequest",["$http","$q","COUNTRY_CAPITAL_PREFIX","COUNTRY_CAPITAL_SUFFIX",function(t,o,n,r){return function(e,i){var s=o.defer();return t.get(n+e+r,{cached:!0,params:i}).success(function(t){s.resolve(t)}),s.promise}}]).factory("countryInfo",["countryInfoRequest","COUNTRY_CAPITAL_CODES",function(t,o){return{getInformation:function(){return t(o).then(function(t){return t.geonames})}}}]).factory("searchInfo",["countryInfoRequest","COUNTRY_CAPITAL_JSON",function(t,o){return{getInformation:function(n,r){return t(n+o,r)}}}]).run(["$rootScope","$state","$timeout",function(t,o,n){t.$on("$stateChangeError",function(){o.go("home")}),t.$on("$stateChangeStart",function(){t.isLoading=!0}),t.$on("$stateChangeSuccess",function(){n(function(){t.isLoading=!1},1e3)})}]),angular.module("ccapp").controller("MainCtrl",["$scope",function(t){t.awesomeThings=[{title:"AngularJS",url:"https://angularjs.org/",description:"HTML enhanced for web apps!",logo:"angular.png"},{title:"BrowserSync",url:"http://browsersync.io/",description:"Time-saving synchronised browser testing.",logo:"browsersync.png"},{title:"GulpJS",url:"http://gulpjs.com/",description:"The streaming build system.",logo:"gulp.png"},{title:"Jasmine",url:"http://jasmine.github.io/",description:"Behavior-Driven JavaScript.",logo:"jasmine.png"},{title:"Karma",url:"http://karma-runner.github.io/",description:"Spectacular Test Runner for JavaScript.",logo:"karma.png"},{title:"Protractor",url:"https://github.com/angular/protractor",description:"End to end test framework for AngularJS applications built on top of WebDriverJS.",logo:"protractor.png"},{title:"jQuery",url:"http://jquery.com/",description:"jQuery is a fast, small, and feature-rich JavaScript library.",logo:"jquery.jpg"},{title:"Bootstrap",url:"http://getbootstrap.com/",description:"Bootstrap is the most popular HTML, CSS, and JS framework for developing responsive, mobile first projects on the web.",logo:"bootstrap.png"},{title:"Sass (Node)",url:"https://github.com/sass/node-sass",description:"Node.js binding to libsass, the C version of the popular stylesheet preprocessor, Sass.",logo:"node-sass.png"}],angular.forEach(t.awesomeThings,function(t){t.rank=Math.random()})}]),angular.module("ccapp").controller("CountryDetailCtrl",["$scope","country","$stateParams","countryInfo","searchInfo",function(t,o,n,r,e){t.loading=!0,t.code=n.country,t.country=o,e.getInformation("search",{featureCode:"PPLC",country:t.code}).then(function(o){t.capital=o.geonames[0],e.getInformation("timezone",{lat:t.capital.lat,lng:t.capital.lng}).then(function(o){t.timezone=o.timezoneId})}),e.getInformation("neighbours",{country:t.code}).then(function(o){t.neighbours=o.geonames})}]),angular.module("ccapp").controller("CountryListCtrl",["$scope","$location","$rootScope","countryInfo",function(t,o,n,r){t.loading=!0,r.getInformation().then(function(o){t.countries=o,t.loading=!1}),t.go=function(t){n.country=t,o.path("/countries/"+t.countryCode)}}]),angular.module("ccapp").run(["$templateCache",function(t){t.put("components/navbar/navbar.html",'<header class="container-fluid"><div class="row"><div class="col-xs-10 col-xs-offset-1" ui-sref-active-eq=""><h1>Countries & Capitals</h1><br></div></div></header>'),t.put("app/countries_list/countries_list.html",'<div class="row"><div class="col-xs-10 col-xs-offset-1"><table class="table"><tr><td>Name</td><td>Country Code</td><td>Capital</td><td>Area in Km2</td><td>Population</td><td>Continent</td></tr><tr ng-repeat="country in countries" ng-click="go(country)"><td>{{ country.countryName }}</td><td>{{ country.countryCode }}</td><td>{{ country.capital }}</td><td>{{ country.areaInSqKm | number }}</td><td>{{ country.population | number }}</td><td>{{ country.continent }}</td></tr></table></div></div><div class="row"><div class="col-xs-12 text-center"><a href="/" ui-sref="home" class="btn btn-lg btn-info">Home</a></div></div>'),t.put("app/country_detail/country_detail.html",'<div class="row"><div class="col-xs-12 col-sm-8 col-sm-offset-2 col-md-4 col-md-offset-4"><h1 id="countryName">{{ country.countryName }}</h1><div class="container-fluid table"><div class="row"><div class="col-xs-6 text-right"><b>Population of the Country:</b></div><div class="col-xs-6">{{ country.population | number }}</div></div><div class="row"><div class="col-xs-6 text-right"><b>Area:</b></div><div class="col-xs-6">{{ country.areaInSqKm | number }} square km</div></div><div class="row"><div class="col-xs-6 text-right"><b>Capital:</b></div><div class="col-xs-6">{{ capital.name }}</div></div><div class="row"><div class="col-xs-6 text-right"><b>Population of Capital:</b></div><div class="col-xs-6">{{ capital.population | number}}</div></div><div class="row"><div class="col-xs-6 text-right"><b>Continent:</b></div><div class="col-xs-6">{{ country.continentName }}</div></div><div class="row"><div class="col-xs-6 text-right"><b>Time Zone:</b></div><div class="col-xs-6">{{ timezone }}</div></div><div class="row"><div class="col-xs-6 text-right"><b><ng-pluralize count="neighbours.length" when="{\'0\': \'\', \'one\': \'1 neighbour: \', \'other\': \'{} neighbours: \'}"></ng-pluralize></b></div><div class="col-xs-6"><span ng-repeat="neighbour in neighbours"><a ng-href="#/countries/{{ neighbour.countryCode }}">{{ neighbour.name }}</a><span ng-show="!$last">,</span></span></div></div><br><br><br><div class="row"><div class="col-xs-6"><img class="img-responsive" ng-src="//www.geonames.org/img/country/250/{{code}}.png"></div><div class="col-xs-6"><img class="img-responsive" ng-src="//www.geonames.org/flags/x/{{code | lowercase}}.gif"></div></div></div></div></div><div class="row"><div class="col-xs-12 text-center"><a ui-sref="home" class="btn btn-lg btn-info">Home</a> <a class="btn btn-lg btn-success" ui-sref="country-list">Browse Countries</a></div></div>'),t.put("app/main/main.html",'<div class="row hero text-center"><div class="col-xs-12 child"><h1>Where do you want to go next?</h1><h3>Get useful information of any country</h3><br><br><br><a class="ghost-btn" ui-sref="country-list" href="/countries">Browse Countries</a></div></div>')}]);